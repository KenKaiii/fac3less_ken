"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,r,t,o){if(void 0===o)o=t;var n=Object.getOwnPropertyDescriptor(r,t);if(!n||("get"in n?!r.__esModule:n.writable||n.configurable))n={enumerable:true,get:function(){return r[t]}};Object.defineProperty(e,o,n)}:function(e,r,t,o){if(void 0===o)o=t;e[o]=r[t]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:true,value:r})}:function(e,r){e.default=r});var __importStar=this&&this.__importStar||function(){var ownKeys=function(e){ownKeys=Object.getOwnPropertyNames||function(e){var r=[];for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))r[r.length]=t;return r};return ownKeys(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t=ownKeys(e),o=0;o<t.length;o++)if("default"!==t[o])__createBinding(r,e,t[o]);__setModuleDefault(r,e);return r}}();Object.defineProperty(exports,"__esModule",{value:true});exports.modelRoutes=void 0;const express_1=require("express");const models_controller_1=require("../controllers/models.controller");const logger_1=require("../../utils/logger");const router=(0,express_1.Router)();exports.modelRoutes=router;router.get("/",models_controller_1.getModels);router.get("/:id",models_controller_1.getModelById);router.get("/test/openrouter",async(e,r)=>{try{const{OpenRouterClient:e}=await Promise.resolve().then(()=>__importStar(require("../../services/ai/llm/providers/openrouter")));const t=new e({apiKey:process.env.OPENROUTER_API_KEY});if(!t.validateConfig())return r.json({success:false,message:"OpenRouter API key not configured",configured:false});const o=await t.complete({model:"anthropic/claude-3-haiku",messages:[{role:"user",content:"Say 'Hello, OpenRouter is working!'"}],maxTokens:20});r.json({success:true,configured:true,testResponse:o.success?o.data?.content:null,error:o.error})}catch(e){logger_1.logger.error("OpenRouter test endpoint failed",{error:e instanceof Error?e.message:"Unknown error",stack:e instanceof Error?e.stack:void 0});r.status(500).json({success:false,error:e instanceof Error?e.message:"Unknown error"})}});