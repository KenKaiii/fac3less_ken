"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ExecutionManager=void 0;class ExecutionManager{progressTracker;executionResults;activeExecutions;nodeInstances;constructor(e){this.progressTracker=e;this.executionResults=new Map;this.activeExecutions=new Map;this.nodeInstances=new Map}createExecution(e,t){this.executionResults.set(e,t)}registerActiveExecution(e,t){this.activeExecutions.set(e,t);this.nodeInstances.set(e,new Map)}getNodeInstances(e){return this.nodeInstances.get(e)}cleanupExecution(e){this.activeExecutions.delete(e);this.nodeInstances.delete(e)}getExecutionResult(e){return this.executionResults.get(e)}cancelExecution(e){const t=this.activeExecutions.get(e);if(!t)return false;t.abort();const s=this.executionResults.get(e);if(s&&"running"===s.status){s.status="cancelled";s.endTime=new Date;this.progressTracker.sendExecutionComplete(e,"cancelled","Workflow cancelled by user")}this.activeExecutions.delete(e);return true}getExecutionStatus(e){const t=this.executionResults.get(e);if(!t)return[];return Array.from(t.nodeStatuses.values())}getActiveExecutions(){return Array.from(this.activeExecutions.keys())}}exports.ExecutionManager=ExecutionManager;