"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ZoomEffect=void 0;const BaseZoomEffect_1=require("./BaseZoomEffect"),FilterGraphBuilder_1=require("../FilterGraphBuilder");class ZoomEffect extends BaseZoomEffect_1.BaseZoomEffect{name="zoom";description="Applies a whip zoom effect to video";constructor(t={}){super(t)}getRequirements(){return{requiresVideo:!0,requiresAudio:!1,modifiesVideo:!0,modifiesAudio:!1,supportsMultipleInputs:!1}}getFilterGraph(t){const o=this.options.duration||.3,e=this.options.type||"out",i=this.options.scale||3,{width:s,height:u}=t.metadata,r=new FilterGraphBuilder_1.FilterGraphBuilder;return r.video("split",{outputs:2},{inputs:["[video_in]"],outputs:["[orig1]","[orig2]"]}),"out"===e?r.video("trim",{end:o},{inputs:["[orig1]"],outputs:["[zoom_part]"]}).video("setpts",{expr:"PTS-STARTPTS"},{inputs:["[zoom_part]"],outputs:["[zoom_part_pts]"]}).video("scale",{w:s*i,h:u*i},{inputs:["[zoom_part_pts]"],outputs:["[zoom_scaled]"]}).video("crop",{w:s,h:u,x:"(in_w-out_w)/2",y:"(in_h-out_h)/2"},{inputs:["[zoom_scaled]"],outputs:["[zoom_cropped]"]}):r.video("trim",{end:o},{inputs:["[orig1]"],outputs:["[zoom_part]"]}).video("setpts",{expr:"PTS-STARTPTS"},{inputs:["[zoom_part]"],outputs:["[zoom_cropped]"]}),r.video("trim",{start:o},{inputs:["[orig2]"],outputs:["[rest_part]"]}).video("setpts",{expr:"PTS-STARTPTS"},{inputs:["[rest_part]"],outputs:["[rest_pts]"]}),r.video("concat",{n:2,v:1,a:0},{inputs:["[zoom_cropped]","[rest_pts]"],outputs:["[video_out]"]}),r.audio("anull",{},{inputs:["[audio_in]"],outputs:["[audio_out]"]}),{nodes:r.getNodes(),outputs:{video:"[video_out]",audio:"[audio_out]"}}}getPriority(){return 10}estimateProcessingTime(t){return Math.ceil(.1*t.metadata.duration)}}exports.ZoomEffect=ZoomEffect;