"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ZoomEffectV2=void 0;const BaseZoomEffect_1=require("./BaseZoomEffect"),FilterGraphBuilder_1=require("../FilterGraphBuilder");class ZoomEffectV2 extends BaseZoomEffect_1.BaseZoomEffect{name="zoom";description="Applies a whip zoom effect to video";constructor(t={}){super(t)}getRequirements(){return{requiresVideo:!0,requiresAudio:!1,modifiesVideo:!0,modifiesAudio:!1,supportsMultipleInputs:!1}}getFilterGraph(t){const o=this.options.duration||.3,e=this.options.type||"out",{width:i,height:s}=t.metadata,u=new FilterGraphBuilder_1.FilterGraphBuilder,r=o;return u.video("split",{outputs:2},{inputs:["[video_in]"],outputs:["[v1]","[v2]"]}),"out"===e?u.video("trim",{end:r},{inputs:["[v1]"],outputs:["[zoom_part]"]}).video("scale",{w:`${i}*3`,h:`${s}*3`},{inputs:["[zoom_part]"],outputs:["[zoom_scaled]"]}).video("crop",{w:i,h:s,x:`(iw-${i})/2`,y:`(ih-${s})/2`},{inputs:["[zoom_scaled]"],outputs:["[zoom_cropped]"]}).video("setpts",{expr:"PTS-STARTPTS"},{inputs:["[zoom_cropped]"],outputs:["[zoom_final]"]}):u.video("trim",{end:r},{inputs:["[v1]"],outputs:["[zoom_part]"]}).video("setpts",{expr:"PTS-STARTPTS"},{inputs:["[zoom_part]"],outputs:["[zoom_final]"]}),u.video("trim",{start:r},{inputs:["[v2]"],outputs:["[rest_part]"]}).video("setpts",{expr:"PTS-STARTPTS"},{inputs:["[rest_part]"],outputs:["[rest_final]"]}),u.video("concat",{n:2,v:1,a:0},{inputs:["[zoom_final]","[rest_final]"],outputs:["[video_out]"]}),u.audio("anull",{},{inputs:["[audio_in]"],outputs:["[audio_out]"]}),{nodes:u.getNodes(),outputs:{video:"[video_out]",audio:"[audio_out]"}}}getPriority(){return 10}estimateProcessingTime(t){const o=this.options.scale||3;return Math.ceil(.2*t.metadata.duration*o)}}exports.ZoomEffectV2=ZoomEffectV2;